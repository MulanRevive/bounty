
## [äº¤äº’ç¯å¢ƒ](https://docs.python.org/3.13/whatsnew/3.13.html#a-better-interactive-interpreter)

### å¸¸ç”¨å‘½ä»¤è°ƒç”¨æ— éœ€ï¼ˆï¼‰

> Direct support for REPL-specific commands like help, exit, and quit, without the need to call them as functions.

è¿™ç‚¹æœ¨å…°ä¹Ÿå…·å¤‡ï¼š

```
% æœ¨å…°
æœ¨å…°å‘æ‚¨é—®å¥½
æ›´å¤šä¿¡æ¯è¯·è¯´'ä½ å¥½'
> ä½ å¥½
	è¯¦æƒ…: åˆ—å‡ºå†…ç½®åŠŸèƒ½
	å†ä¼š: ç»“æŸå¯¹è¯
	ä½ å¥½: æ˜¾ç¤ºè¿™æ®µ
> å†ä¼š
%
```

### æ•´æ®µä»£ç é»è´´

> â€œPaste modeâ€ with F3 that makes pasting larger blocks of code easier (press F3 again to return to the regular prompt).

ç»æµ‹è¯• Python 3.13 çš„äº¤äº’ç¯å¢ƒä¸‹å¯ç²˜è´´æ•´æ®µï¼š

```
>>> import sys, cmd; from random import randrange
... 
... class çŒœæ•°å­—(cmd.Cmd):
...     intro, prompt = "æˆ‘æƒ³äº†ä¸ª 100 ä¹‹å†…çš„æ•°ï¼ŒçŒœçŒœæ˜¯å‡ ï¼Ÿ", 'è¯·çŒœå§: '
...     æƒ³çš„ = randrange(1000) // 10
... 
...     def default(self, è¡Œ):
...         try:
...             æ•° = int(è¡Œ)
...         except ValueError as ä¾‹å¤–:
...             print(è¡Œ + " ä¸æ˜¯æ•°ï¼Œè¯·å†è¯•")
...             return
...         self.æ¯”è¾ƒ(æ•°)
... 
...     def æ¯”è¾ƒ(self, æ•°):
...         if æ•° == self.æƒ³çš„:
...             print("ä¸­äº†!")
...             sys.exit()
...         print("å¤ªå¤§äº†!" if æ•° > self.æƒ³çš„ else "å¤ªå°äº†!")
... 
... çŒœæ•°å­—().cmdloop()
... 
æˆ‘æƒ³äº†ä¸ª 100 ä¹‹å†…çš„æ•°ï¼ŒçŒœçŒœæ˜¯å‡ ï¼Ÿ
ã€‚ã€‚ã€‚ã€‚
```

Python 3.12 æŒ‰è¡Œè§£æä¼šæŠ¥é”™ã€‚

æœ¨å…°äº¤äº’ç¯å¢ƒä¹Ÿæ”¯æŒé»è´´å¤šè¡Œä»£ç ï¼š

```javascript
> using sys, cmd
> using randrange in random
> 
> type çŒœæ•°å­— : cmd.Cmd {
>>    {
>>     intro, prompt = tuple('æˆ‘æƒ³äº†ä¸ª 100 ä¹‹å†…çš„æ•°ï¼ŒçŒœçŒœæ˜¯å‡ ï¼Ÿ', 'è¯·çŒœå§: ')
>>     æƒ³çš„ = randrange(1000) / 10
>>   }
>> 
>>   func $default(è¡Œ) {
>>     try {
>>       æ•° = int(è¡Œ)
>>     }
>>     catch ä¾‹å¤– : ValueError {
>>       println(è¡Œ + ' ä¸æ˜¯æ•°ï¼Œè¯·å†è¯•')
>>       return
>>     }
>>     $æ¯”è¾ƒ(æ•°)
>>   }
>> 
>>   func $æ¯”è¾ƒ(æ•°) {
>>     if (æ•° == $æƒ³çš„) {
>>       println('ä¸­äº†!')
>>       sys.exit()
>>     }
>>     println((æ•° > $æƒ³çš„) ? 'å¤ªå¤§äº†!' : 'å¤ªå°äº†!')
>>   }
>> }
> çŒœæ•°å­—().cmdloop()
æˆ‘æƒ³äº†ä¸ª 100 ä¹‹å†…çš„æ•°ï¼ŒçŒœçŒœæ˜¯å‡ ï¼Ÿ
ã€‚ã€‚ã€‚ã€‚
```

## [æŠ¥é”™ä¿¡æ¯](https://docs.python.org/3.13/whatsnew/3.13.html#improved-error-messages)

### æ–‡ä»¶åä¸æ ‡å‡†åº“é‡å

```
% python random.py 
Traceback (most recent call last):
  File "ã€...ã€‘/random.py", line 1, in <module>
    import random
  File "ã€...ã€‘/random.py", line 3, in <module>
    print(random.randint(5))
          ^^^^^^^^^^^^^^
AttributeError: module 'random' has no attribute 'randint' (consider renaming 'ã€...ã€‘/random.py' since it has the same name as the standard library module named 'random' and prevents importing that standard library module)
```

ä¸ªäººè®¤ä¸ºï¼Œ`AttributeError: module 'random' has no attribute 'randint'` å®é™…ä¸ŠåŒ…å«äº†â€œimportçš„æ˜¯å½“å‰æ¨¡å—è€Œéæ ‡å‡†åº“â€è¿™ä¸€éšå«ä¿¡æ¯ï¼Œè€Œå¯¹å®šä½é—®é¢˜å¹¶æ— å¸®åŠ©ï¼Œå¤§å¯ä»¥ç›´æ¥å»æ‰è€Œé‡‡ç”¨æ‹¬å·å†…åé¦ˆä¿¡æ¯ã€‚

æœ¨å…°å½“ä¸‹å¹¶æ— é’ˆå¯¹æ­¤å¼•ç”¨åœºæ™¯çš„ç‰¹å®šæŠ¥é”™ï¼Œ`using random` ä¼šåŠ è½½æœ¨å…°æ¨¡å—æœ¬èº«ï¼Œäºæ˜¯æŒ‰ä¸€èˆ¬é€’å½’æŠ¥é”™ã€‚

```
% æœ¨å…° random.ul
 ğŸ˜° é€’å½’è¿‡æ·±ã€‚è¯·ç¡®è®¤: 1ã€çš„ç¡®éœ€è¦é€’å½’ 2ã€é€’å½’çš„æ”¶æ•›æ­£ç¡®
 è°ƒç”¨å±‚çº§å¦‚ä¸‹
ã€‚ã€‚ã€‚ã€‚
è§ç¬¬1è¡Œï¼šusing random
â€œã€...ã€‘/æœ¨å…°/ç¯å¢ƒ.pyâ€ç¬¬85è¡Œï¼šexec(å¯æ‰§è¡Œç , æ¨¡å—.__dict__)
â€œã€...ã€‘/æœ¨å…°/ç¯å¢ƒ.pyâ€ç¬¬173è¡Œï¼šreturn åŠ è½½æœ¨å…°æ¨¡å—(åç§°, å…¨å±€, æºè‡ª, ç›®å½•ç›¸å¯¹å±‚æ¬¡)
â€œã€...ã€‘/æœ¨å…°/ç¯å¢ƒ.pyâ€ç¬¬177è¡Œï¼šraise ä¾‹å¤–
ã€‚ã€‚ã€‚ã€‚ã€é€’å½’å¾ªç¯ã€‘
```

