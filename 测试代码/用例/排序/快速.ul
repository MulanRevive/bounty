func 分区(数列, 下界, 上界) {
  中值 = 数列[上界] // 中值可以取任意一个位置的
  前位 = 下界
  for 后位 in 下界..上界 {
    if 数列[后位] < 中值 {
      数列[前位], 数列[后位] = 数列[后位], 数列[前位]
      前位 += 1
    }
  }
  数列[前位], 数列[上界] = 数列[上界], 数列[前位]
  return 前位
}

func 快速排序(数列) {
  func 递归(各项, 下界, 上界) {
    if 下界 < 上界 {
      中位 = 分区(各项, 下界, 上界)
      递归(各项, 下界, 中位 - 1)
      递归(各项, 中位 + 1, 上界)
    }
  }

  递归(数列, 0, len(数列) - 1)
}

打乱数列 = [5, 2, 1, 8, 4]
快速排序(打乱数列)
print(打乱数列)
